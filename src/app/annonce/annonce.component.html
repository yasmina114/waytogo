<div class="head-search">
  <div class="container">
    <div class="row">
      <div class="col-md-12">
        <div class="search-route">
          <form method="post">
            <div class="location">
              <p>
                <label><i class="fa fa-location-arrow"></i></label>
                <input type="text" placeholder="Your location" [ngModelOptions]="{standalone: true}"
                       [(ngModel)]="lieu_departSearch">
              </p>

              <p>
                <label><i class="fa fa-location-arrow"></i></label>
                <input type="text" placeholder="Going to" [ngModelOptions]="{standalone: true}"
                       [(ngModel)]="lieu_arriveSearch">
              </p>
            </div>
            <div class="date-n-time">
              <p>
                <label><i class="fa fa-calendar"></i></label>
                <input id="datetimepicker1" type="text" [ngModelOptions]="{standalone: true}"
                       [(ngModel)]="date_departSearch">
              </p>

            </div>
            <button class="theme-btn" type="submit"><i class="fa fa-search"></i> Search</button>
          </form>
        </div>
      </div>
    </div>
  </div>
</div>
<section>
  <div class="space-70">
    <div class="container">
      <div class="row">
        <div class="col-lg-2 col-md-12"></div>
        <div class="col-lg-8 col-md-12">
          <div class="heading text-left no-margin">
            <h5>Dernière Annonce Publiée</h5>
          </div>
          <div class="rides-list">
            <div class="rides-listing" *ngFor="let ad of cars.slice(-5).reverse()|annonce:lieu_departSearch:lieu_arriveSearch:date_departSearch">
              <app-user [id]="ad.description"></app-user>

              <span class="tag bottom">{{ ad.prixPlace }} &nbsp;Dinars</span>
              <div class="rides-meta">
                <h4>{{ ad.lieuDep }} - {{ ad.lieuArr }}</h4>
                <span>
                  <i class="fa fa-location-arrow"></i>
                  <em>{{ ad.lieuDep }}</em>
                  <em>{{ ad.lieuArr }}</em>
                </span>
                <p>Depart: {{ ad.dateDep }}</p>
                <p>Arrivee: {{ ad.dateArr }}</p>
                <i class="kirk-item-leftAddon">
                  <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" class="kirk-icon sc-3dofso-0 ilUJhC"
                       width="24" height="24" aria-hidden="true">
                    <g fill="none" stroke="#708C91" stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
                       stroke-miterlimit="10">
                      <path
                        d="M9.22618069 9.0429408l-.00028462-.00007396C7.82743395 8.67899715 6.7546224 8.5 5.57615516 8.5c-1.20731888 0-2.51302356.20463937-3.81321944.5429408-.74874646.19434829-1.26113536.83740338-1.26113536 1.5649162 0 .8614291 0 .8614291-.00005576 1.3996098-.04579034 3.0659186.80767638 5.4432745 2.56126466 7.1880948 1.77599725 1.7671173 3.62950633 2.8975921 5.56078302 3.4005323.45618092.1187979 1.04453239.2272721 1.76281212.3242675.054739.0073909.1051053-.0309924.1124962-.0857314A.1000144.1000144 0 0 0 10.5 22.8212476l9e-7-12.2143318c.0013584-.72163072-.51999668-1.36830888-1.27382021-1.563975z"></path>
                      <path transform="matrix(-1 0 0 1 37.000004 0)"
                            d="M22.2261807 9.0429408l-.0002846-.00007396C20.827434 8.67899715 19.7546224 8.5 18.5761552 8.5c-1.2073189 0-2.5130236.20463937-3.8132195.5429408-.7487464.19434829-1.2611353.83740338-1.2611353 1.5649162 0 .8614291 0 .8614291-.0000558 1.3996098-.0457903 3.0659186.8076764 5.4432745 2.5612647 7.1880948 1.7759972 1.7671173 3.6295063 2.8975921 5.560783 3.4005323.4561809.1187979 1.0445324.2272721 1.7628121.3242675.054739.0073909.1051053-.0309924.1124962-.0857314A.1000144.1000144 0 0 0 23.5 22.8212476l9e-7-12.2143318c.0013584-.72163072-.5199967-1.36830888-1.2738202-1.563975z"></path>
                      <path
                        d="M5.56759528 6.313482c-1.39916306 0-2.53379764-1.08153511-2.53379764-2.41521909v-.48304382C3.03379764 2.08153511 4.16843222 1 5.56759528 1c1.39916305 0 2.53379764 1.08153511 2.53379764 2.41521909v.48304382c0 1.33368398-1.13463459 2.41521909-2.53379764 2.41521909zM18.5337976 6.313482C17.1346346 6.313482 16 5.23194689 16 3.89826291v-.48304382C16 2.08153511 17.1346346 1 18.5337976 1c1.3991631 0 2.5337977 1.08153511 2.5337977 2.41521909v.48304382c0 1.33368398-1.1346346 2.41521909-2.5337977 2.41521909z"></path>
                    </g>
                  </svg>&nbsp;<span>{{ad.nbrPlace}}</span> </i>
              </div>
              <div class="price-tag">
                <div class="request-box" style="display: none">
                  <a href="#" title="" class="theme-btn">+ send the request</a>
                  <p>Offer subject to availability.</p>
                </div>
                <div >
                  <a data-toggle="modal" class="btn" data-target=".bd-example-modal-sm"
                     style="color: #ADD8E6; cursor: grab" (click)="getoneannonce(ad?.id)">
                    <i class="fa fa-arrow-circle-right"></i>&nbsp;Reserver Votre place
                  </a>
                </div>
                <div *ngIf="ad.nbrplacesdisponible === 0">
                  <a class="btn" style="color: #ff4248; cursor: grab">
                    <i class="fa fa-ban"></i> Reservation Indisponible
                  </a>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>


<div class="modal fade bd-example-modal-sm" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-sm">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLongTitle">Nombre de places que vous souhaitez réserver</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <form [formGroup]="reservationForm">

          <div class="seat-pirces">
						<span>
							<i class="fa fa-location-arrow"></i>
							<em>{{annonce?.lieuDep}}</em>
							<em>{{annonce?.lieuArr}}</em>
						</span>
          </div>

          <input formControlName="nbplaces" min="1" id="nbplaces" max="{{nbrplacedispo}}" type="number"
>

          <div class="invalid-feedback" *ngIf="reservationForm.controls['nbplaces'].hasError('max')">
            Minimum required number is {{annonce.nbrPlace}} disponible.
          </div>


          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-dismiss="modal" >Annuler</button>
            <button type="submit" class="btn btn-primary" data-dismiss="modal">Confirmer
            </button>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>
